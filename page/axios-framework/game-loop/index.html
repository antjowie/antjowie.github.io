<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Axios Framework Game Loop</title>
  <meta property="og:title" content="Axios Framework Game Loop" />
  <meta name="twitter:title" content="Axios Framework Game Loop" />
  <meta name="description" content="How the Axios framework updates everything">
  <meta property="og:description" content="How the Axios framework updates everything">
  <meta name="twitter:description" content="How the Axios framework updates everything">
  <meta name="author" content="Angelo Anthony Rettob"/>
  <link href='https://antjowie.github.io/img/icons/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://antjowie.github.io/img/icons/site-icon.png" />
  <meta name="twitter:image" content="https://antjowie.github.io/img/icons/site-icon.png" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://antjowie.github.io/page/axios-framework/game-loop/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Angelo&#39;s Portfolio" />

  <meta name="generator" content="Hugo 0.41" />
  <link rel="canonical" href="https://antjowie.github.io/page/axios-framework/game-loop/" />
  <link rel="alternate" href="https://antjowie.github.io/index.xml" type="application/rss+xml" title="Angelo&#39;s Portfolio">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://antjowie.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://antjowie.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://antjowie.github.io/css/codeblock.css" />



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://antjowie.github.io/">Angelo&#39;s Portfolio</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Projects" href="/projects/">Projects</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags/">Tags</a>
            </li>
          
        

        

        
          <li>
            <a href="#modalSearch" data-toggle="modal" data-target="#modalSearch" style="outline: none;">
              <span class="hidden-sm hidden-md hidden-lg">Search</span> <span id="searchGlyph" class="glyphicon glyphicon-search"></span>
            </a>
          </li>
        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Angelo&#39;s Portfolio" href="https://antjowie.github.io/">
            <img class="avatar-img" src="https://antjowie.github.io/img/icons/site-icon.png" alt="Angelo&#39;s Portfolio" />
          </a>
        
      </div>
    </div>

  </div>
</nav>



  <div id="modalSearch" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Search Angelo&#39;s Portfolio</h4>
        </div>
        <div class="modal-body">
          <gcse:search></gcse:search>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="page-heading">
              <h1>Axios Framework Game Loop</h1>
                
                  
                    <hr class="small">
                    <span class="page-subheading">How the Axios framework updates everything</span>
                  
                
                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p>The <code>Game Loop</code> is responsible for updating everything, it is the code that is repeatedly run.</p>

<h2 id="what-will-the-game-loop-do">What will the Game Loop do</h2>

<p>The <code>Game Loop</code> will make sure that the user experiences our game in the same speed as everyone else does. Most of the time, games will run at the fastest speed possible, but with a higher fps, the program runs faster. This means that things like movement will be different.</p>

<p>This is fixed by using a time variable. For perfect results, we need the time the frame is taking and multiply all physics related code with it, but we can&rsquo;t predict the time it will take to render the frame, because the calculations will be finished by then. There are several ways to fix this.</p>

<h4 id="fixing-timing">Fixing timing</h4>

<p>We could use the time of the previous frame, it is an estimation of the time the next frame will take. If however, something very demanding would happen on that frame, the time would be incorrect, leading to lag. Because the frame took long but the time value is relatively low.</p>

<p>Another approach is to take the last few frame&rsquo;s time and calculate their average. This would result into a fairly accurate guess and sudden lags would compensate and not make you warp on the next frame. But because this approach uses an average, a game with many demanding and undemanding frames close by would make the game feel sluggish.</p>

<p>In the end, it all depends on your game. I will take the latter approach because my game won&rsquo;t be that demanding and it is the safer choice.</p>

<h4 id="the-loop-itself">The loop itself</h4>

<p>The <code>Game Loop</code> will follow the following procedure:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">Average</span><span class="o">&lt;</span><span class="n">Time</span><span class="p">,</span><span class="mi">20</span><span class="o">&gt;</span> <span class="n">averageTime</span><span class="p">;</span> <span class="c1">// 20 is the amount of elements to hold
</span><span class="c1"></span><span class="n">Clock</span> <span class="n">frameTime</span><span class="p">;</span>    <span class="c1">// A class that keeps track of the time elapsed between reset calls
</span><span class="c1"></span><span class="n">Time</span> <span class="n">elapsedTime</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">float</span> <span class="n">refreshRate</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>
<span class="n">elapsedTime</span> <span class="o">=</span> <span class="n">frameTime</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span>

<span class="k">while</span> <span class="p">(</span><span class="n">gameIsRunning</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// If the game has an fps lower than 0, skip the frame
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">elapsedTime</span><span class="p">.</span><span class="n">ms</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">elapsedTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">gs_inputHandler</span><span class="o">::</span><span class="n">updatePressed</span><span class="p">();</span>
    <span class="c1">// This unties our input polling rate from our rendering,
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="mf">1.f</span><span class="o">/</span><span class="n">elapsedTime</span><span class="p">.</span><span class="n">ms</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">refreshRate</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">averageTime</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">elapsedTime</span><span class="p">.</span><span class="n">ms</span><span class="p">());</span>
        <span class="n">elapsedTime</span> <span class="o">%=</span> <span class="mf">1.f</span><span class="o">/</span><span class="n">refreshRate</span><span class="p">;</span>

        <span class="n">updateScene</span><span class="p">(</span><span class="n">averageTime</span><span class="p">.</span><span class="n">getAverage</span><span class="p">());</span>
        <span class="n">renderScreen</span><span class="p">();</span>

        <span class="n">gs_inputHandler</span><span class="o">::</span><span class="n">updateReleased</span><span class="p">();</span>
        <span class="c1">// The input handler handles three different types of input
</span><span class="c1"></span>        <span class="c1">// pressed,hold,released.
</span><span class="c1"></span>        <span class="c1">// We can&#39;t set these states to false in our input loop because it runs faster
</span><span class="c1"></span>        <span class="c1">// than our render loop. When the user presses a button, he expects to see it
</span><span class="c1"></span>        <span class="c1">// happen in the program. 
</span><span class="c1"></span>        <span class="c1">// You could also tie the input handler to the rendering loop, but the input could
</span><span class="c1"></span>        <span class="c1">// skip a frame and end up at the next frame. If the user would press a key and 
</span><span class="c1"></span>        <span class="c1">// release it in between the frame (when the program is waiting until enough 
</span><span class="c1"></span>        <span class="c1">// time has passed for the next frame), it could not be registered. 
</span><span class="c1"></span>        <span class="c1">// Of course, this will only happen at low fps. Something that isn&#39;t 
</span><span class="c1"></span>        <span class="c1">// supposed to happen in our game, but this way the risk will be dodged.
</span><span class="c1"></span>    <span class="p">}</span>
    <span class="n">elapsedTime</span> <span class="o">+=</span> <span class="n">frameTime</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Everything should make sense, the code itself is very simple. But the <code>Game Loop</code> class isn&rsquo;t a complicated class. All it has to do is make sure that everything is updated with the correct timings. For now, I think this is all the <code>Game Loop</code> needs.</p>


        

        
            <hr/>
            <section id="social-share">
              <ul class="list-inline footer-links">
                


<li>
    <a href="//twitter.com/share?url=https%3a%2f%2fantjowie.github.io%2fpage%2faxios-framework%2fgame-loop%2f&amp;text=Axios%20Framework%20Game%20Loop&amp;via="
       target="_blank" alt="" title="Share on Twitter">
        <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
    </a>
</li>


<li>
    <a href="//plus.google.com/share?url=https%3a%2f%2fantjowie.github.io%2fpage%2faxios-framework%2fgame-loop%2f" target="_blank" title="Share on Google Plus">
         <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
              </span>
    </a>
</li>


<li>
    <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fantjowie.github.io%2fpage%2faxios-framework%2fgame-loop%2f" target="_blank" title="Share on Facebook">
        <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
              </span>
    </a>
</li>


<li>
    <a href="//reddit.com/submit?url=https%3a%2f%2fantjowie.github.io%2fpage%2faxios-framework%2fgame-loop%2f&amp;title=Axios%20Framework%20Game%20Loop" target="_blank" title="Share on Reddit">
         <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-reddit fa-stack-1x fa-inverse"></i>
              </span>
    </a>
</li>


<li>
    <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fantjowie.github.io%2fpage%2faxios-framework%2fgame-loop%2f&amp;title=Axios%20Framework%20Game%20Loop" target="_blank"
       title="Share on LinkedIn">
         <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
    </a>
</li>


<li>
    <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fantjowie.github.io%2fpage%2faxios-framework%2fgame-loop%2f&amp;title=Axios%20Framework%20Game%20Loop" target="_blank"
       title="Share on StumbleUpon">
        <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stumbleupon fa-stack-1x fa-inverse"></i>
              </span>
    </a>
</li>


<li>
    <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fantjowie.github.io%2fpage%2faxios-framework%2fgame-loop%2f&amp;description=Axios%20Framework%20Game%20Loop" target="_blank"
       title="Share on Pinterest">
         <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-pinterest fa-stack-1x fa-inverse"></i>
              </span>
    </a>
</li>

              </ul>
            </section>
        
      </article>

      


      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:angelo05rettob@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/antjowie" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            
            <a href="https://antjowie.github.io/index.xml" title="RSS">
            
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="https://antjowie.github.io/">Angelo Anthony Rettob</a>
            
          

          &nbsp;&bull;&nbsp;
          2018

          
            &nbsp;&bull;&nbsp;
            <a href="https://antjowie.github.io/">Angelo&#39;s Portfolio</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.41</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://antjowie.github.io/js/main.js"></script>
<script src="https://antjowie.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="https://antjowie.github.io/js/load-photoswipe.js"></script>


<script>
  (function() {
    var cx = '001716844541583678590:jrms-ixh6ca';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>





  </body>
</html>

